<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Charlotte Rachwalski">
	<title>Minecraft - Communauté</title>
	<link rel="icon" href="Images/logo.png">
	<link rel="stylesheet" type="text/css" href="style.css" media="screen">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script>
	    // Charger les éléments de la page depuis le fichier index
		$(document).ready(function(){
	    	$("header").load("index.html header");
	    	$("nav").load("index.html nav", function() {

		        // Une fois que nav EST CHARGÉ → on active le menu responsive
		        $("nav button").on("click", function(){
		            $("nav ul").slideToggle(250);

		            let expanded = $(this).attr("aria-expanded") === "true";
		            $(this).attr("aria-expanded", !expanded);
		        });

		        $(window).on("resize", function(){
		            if($(window).width() > 768){
		                $("nav ul").removeAttr("style");
		            }
		        });
		    });
		    
	    	$("footer").load("index.html footer", function() {

		        // On écoute le click une fois le footer chargé
		        $(document).on("click", "footer>button", function() {
		            $('html, body').animate({ scrollTop: 0 }, 800);
    			});

    			// Forcer le navigateur à recalculer le layout
			    $(this).css("position", "relative"); 
			
    		});

		    $('form fieldset:nth-of-type(2) > div > div > div:first-child').click(function() {
		        $(this).parent().toggleClass('open');
		        $(this).siblings('form fieldset:nth-of-type(2) > div > div > div:nth-child(2)').slideToggle(150);
		    });

		    $('form fieldset:nth-of-type(2) > div > div > div:nth-child(2) > div').click(function() {
		        var value = $(this).data('value');
		        var text = $(this).text();

		        $(this).parent().siblings('form fieldset:nth-of-type(2) > div > div > div:first-child').text(text);
		        $(this).closest('form fieldset:nth-of-type(2) > div').find('select').val(value).change();

		        $(this).parent().slideUp(150);
		        $(this).parent().parent().removeClass('open');
		    });

		    $(document).click(function(e) {
		        if (!$(e.target).closest('form fieldset:nth-of-type(2) > div').length) {
		            $('form fieldset:nth-of-type(2) > div > div > div:nth-child(2)').slideUp(150);
		            $('form fieldset:nth-of-type(2) > div > div').removeClass('open');
		        }
		    });
		});

		
		$(function() {
		    // S'assure que le popup est caché au départ
		    $("main>div").hide();

		    // Submit du formulaire
		    $("#experienceForm").on("submit", function(e) {
		        e.preventDefault();

		        // Récupération des valeurs
		        const pseudo = $("#pseudo").val() || "Joueur";
		        const activites = $('input[name="activites"]:checked')
		                            .map(function() { return $(this).val(); })
		                            .get();
		        const temps = $("#temps").val();
		        const projet = $("#projet").val();
		        const conseil = $("#conseil").val();
		        const newsletter = $("#newsletter").is(":checked") ? "Oui" : "Non";

		        // Construction du contenu de la carte
		        const cardHtml = `
		            <h2>${pseudo}</h2>
		            <p><strong>Activités :</strong> ${activites.join(", ") || "Non renseigné"}</p>
		            <p><strong>Temps de jeu :</strong> ${temps}</p>
		            <p><strong>Votre projet favori :</strong><br>${projet || "Aucun"}</p>
		            <p><strong>Votre conseil :</strong><br>${conseil || "Aucun"}</p>
		            <p><strong>Newsletter :</strong> ${newsletter}</p>
		        `;

		        $("main>div>div>div").html(cardHtml);

		        // Ouvre le popup centré
		        $("main>div").css("display", "flex").hide().fadeIn(300);
		    });

		    // Fermeture via le bouton ✖
		    $("main>div>div>span").on("click", function() {
		        $("main>div").fadeOut(200);
		    });

		    // Fermeture si clic à l’extérieur de la carte
		    $("communaute main>div").on("click", function(e) {
		        if(e.target === this) {
		            $(this).fadeOut(200);
		        }
		    });
		});

		$(document).ready(function(){

		  $("nav button").click(function(){
		    $("nav ul").slideToggle(250);
		    
		    // Accessibilité + rotation si besoin
		    let expanded = $(this).attr("aria-expanded") === "true";
		    $(this).attr("aria-expanded", !expanded);
		  });

		  // Empêche le menu de rester ouvert après redimensionnement
		  $(window).resize(function(){
		    if($(window).width() > 768){
		      $("nav ul").removeAttr("style");
		    }
		  });

		});


  	</script>
</head>
<body class="communaute">

	<div>

		<header></header>

		<nav></nav>

	</div>

	<main>

		<h1>Partagez votre expérience Minecraft</h1>

		<form id="experienceForm">
			<fieldset>
				<legend>Votre profil et style de jeu</legend>
				<label for="pseudo"><img src="Images/pnj.png" alt="Icone du joueur">Pseudo&nbsp;:</label>
				<input type="text" name="pseudo" id="pseudo" placeholder="Votre pseudonyme" required="required" maxlength="16">
				<label for="mail"><img src="Images/letter.png" alt="Icone de lettre">Email&nbsp;&nbsp;:</label>
				<input type="email" name="mail" id="mail" placeholder="exemple@mail.com" required="required">
				<label for="age">Âge&nbsp;:</label>
				<input type="number" name="age" id="age" min="10" max="100" required="required">
				<p>Type de joueur&nbsp;:</p>
				<input type="radio" name="type" id="explorateur" value="explorateur"><label for="explorateur">Explorateur</label><img src="Images/longuevu.png" alt="Icone de lnogue vu">
				<input type="radio" name="type" id="constructeur" value="constructeur"><label for="constructeur">Constructeur</label><img src="Images/etabli.png" alt="Icone d'établi">
				<input type="radio" name="type" id="redstone" value="redstone"><label for="redstone">Ingénieur Redstone</label><img src="Images/redstone.png" alt="Icone de poudre de redstone">
				<input type="radio" name="type" id="autre" value="autre"><label for="autre">Autre</label><img src="Images/pnj2.png" alt="Icone de pnj">
			</fieldset>
			<fieldset>
				<legend>Vos pratiques</legend>
				<p>Quelles activités pratiquez-vous le plus&nbsp;?</p>
				<input type="checkbox" name="activites" id="exploration" value="exploration"><label for="exploration">Exploration</label><img src="Images/explo.png" alt="Icone de d'appareil photo">
				<input type="checkbox" name="activites" id="construction" value="construction"><label for="construction">Construction</label><img src="Images/brique.png" alt="Icone de bloc de brique">
				<input type="checkbox" name="activites" id="survie" value="minage"><label for="survie">Minage&nbsp;/&nbsp;Survie</label><img src="Images/pioche.png" alt="Icone de pioche">
				<input type="checkbox" name="activites" id="mod" value="modding"><label for="mod">Modding&nbsp;/&nbsp;Plugins</label><img src="Images/commandblock.png" alt="Icone de command block">
				<label for="temps"><img src="Images/sablier.png" alt="Icone de sablier">Durée moyenne de jeu par semaine&nbsp;:</label>
				<div>
				    <div>
				        <div>Choisir la durée</div>
				        <div>
				            <div data-value="<1">Moins de 1h</div>
				            <div data-value="1-5">1 à 5h</div>
				            <div data-value="5-10">5 à 10h</div>
				            <div data-value=">10">Plus de 10h</div>
				        </div>
				    </div>
					<select id="temps" name="temps" size="1">
						<option value="<1">Moins de 1h</option>
						<option value="1-5">1 à 5h</option>
						<option value="5-10">5 à 10h</option>
						<option value=">10">Plus de 10h</option>
					</select>
				</div>
			</fieldset>
			<fieldset>
				<legend>Vos projets et conseils</legend>
				<label for="projet">Décrivez votre projet ou création favorite&nbsp;:</label>
				<textarea name="projet" id="projet" rows="3" cols="100" maxlength="150" placeholder="Votre construction, votre monde, ou votre mini-jeu préféré"></textarea>
				<label for="conseil">Astuce ou conseil pour la communauté&nbsp;:</label>
				<textarea name="conseil" id="conseil" rows="3" cols="100" maxlength="150" placeholder="Une idée ou un secret à partager"></textarea>
				<label for="capture"><img src="Images/camera.png" alt="Icone de d'appareil photo">Envoyez une capture ou un plan de votre monde&nbsp;:</label>
				<input type="file" name="capture" id="capture">
				<label for="newsletter">Souhaitez-vous recevoir des nouvelles de la communauté ?</label>
				<input type="checkbox" name="newsletter" id="newsletter" value="oui"> Oui, je souhaite recevoir des infos
			</fieldset>
			<fieldset>
				<legend>Soumission</legend>
				<input type="submit" name="valider" value="Envoyer mon expérience">
			</fieldset>
		</form>

		<div>
		    <div>
		        <span>✖</span>	
		        <div></div>
		    </div>
		</div>

	</main>

	<footer></footer>

</body>
</html>